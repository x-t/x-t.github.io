<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"/> <meta http-equiv="X-UA-Compatible" content="IE=edge"/> <meta name="viewport" content="width=device-width, initial-scale=1"/> <link rel="shortcut icon" type="image/png" href="/reviews/assets/favicon.png"/> <link rel="stylesheet" href="/reviews/assets/css/style.css"/> <title>Reviews Revisited - Debian</title> <meta itemprop="description" name="description" content="The ol' reliable."/> <title>Debian | Reviews Revisited</title> <meta name="generator" content="Jekyll v4.2.1"/> <meta property="og:title" content="Debian"/> <meta property="og:locale" content="en_US"/> <meta name="description" content="The ol‚Äô reliable."/> <meta property="og:description" content="The ol‚Äô reliable."/> <meta property="og:site_name" content="Reviews Revisited"/> <meta property="og:type" content="article"/> <meta property="article:published_time" content="2022-03-12T15:21:15+00:00"/> <meta name="twitter:card" content="summary"/> <meta property="twitter:title" content="Debian"/> <script type="application/ld+json">
{"description":"The ol‚Äô reliable.","datePublished":"2022-03-12T15:21:15+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"/reviews/new/Debian"},"@type":"BlogPosting","url":"/reviews/new/Debian","headline":"Debian","dateModified":"2022-03-12T15:21:15+00:00","@context":"https://schema.org"}</script> </head> <body class="antialiased min-h-screen text-gray-900 bg-gradient-to-tl from-red-50 to-green-50 dark:text-white dark:from-green-800 dark:to-purple-800"> <header> <a href="/reviews/guide.html" class="flex items-center m-5 text-xl hover:underline"> <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"> <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path> </svg> <span>Guide</span> </a> </header> <article class=" prose prose-sm dark:prose-invert sm:prose-base lg:prose-lg xl:prose-xl mx-auto w-5/6 md:w-1/2 pb-5 "> <h1 id="debian">Debian</h1> <p>Challenges:</p> <ul> <li>Create an AD-DC Principal Server</li> <li>Connect two Debian containers to it</li> </ul> <p>I have to say, I‚Äôm not new to Debian. Nor have I really forgotten anything. My home server (a Raspberry Pi) has been running nearly 24/7 for quite a few years with a copy of Raspbian, which is Pi-optimised Debian. I like Debian, a lot. I like the size of its community, the amount of packages, the good deal of stability and great support for non-x86 ISAs. A lot of people agree with me, especially cloud providers, where portability, stability and power management are all very crucial, as in an environment where you can save pennies off one server, you‚Äôll save thousands off one datacenter.</p> <h2 id="hardware">hardware</h2> <p>Debian is interesting in the hardware department, as it shies away from including proprietary firmware, which makes a lot of things not work, but will allow it to run anyway. It‚Äôs in the weird meta-position of being with FSF, but also not, as the FSF doesn‚Äôt recommend it as ‚Äúhow easy it is to run non-free firmware‚Äù. Personally I don‚Äôt understand this position, as it makes people go download the firmware CD image and completely ignore whatever mission statement there is from ‚Äútruly-free software‚Äù. All you have to do is include the damn firmware by default.</p> <h2 id="challenge-1-addc">challenge 1: ad/dc</h2> <p>I‚Äôve never done a single AD/DC server in my life. I installed the AD Forest role on Server 2022 once, and I screwed it up beyond belief. Some people also have done the same as me and everyone in the forum had only one suggestion. ‚ÄúReinstall the OS‚Äù. Yeah. I wasn‚Äôt going to do that. Anyway, maybe Linux can do it a bit better?</p> <p>Well, I followed this guide: <a href="https://blog.dftorres.ca/?p=220">https://blog.dftorres.ca/?p=220</a></p> <p><a href="/reviews/assets/img/new/Debian.png"><picture><source srcset="/reviews/generated/assets/img/new/Debian-400-928511e05.webp 400w, /reviews/generated/assets/img/new/Debian-600-928511e05.webp 600w, /reviews/generated/assets/img/new/Debian-800-928511e05.webp 800w, /reviews/generated/assets/img/new/Debian-1000-928511e05.webp 1000w" type="image/webp"><source srcset="/reviews/generated/assets/img/new/Debian-400-12cb49ba4.png 400w, /reviews/generated/assets/img/new/Debian-600-12cb49ba4.png 600w, /reviews/generated/assets/img/new/Debian-800-12cb49ba4.png 800w, /reviews/generated/assets/img/new/Debian-1000-12cb49ba4.png 1000w" type="image/png"><img src="/reviews/generated/assets/img/new/Debian-800-12cb49ba4.png" alt="Debian desktop with terminal output showing all Active Directory groups and users inside the Administrators group."></picture></a></p> <p>The server seemed to set up fine, but I couldn‚Äôt get Windows to recognise it.</p> <p><a href="/reviews/assets/img/new/Debian-1.png"><picture><source srcset="/reviews/generated/assets/img/new/Debian-1-400-8b131628a.webp 400w, /reviews/generated/assets/img/new/Debian-1-600-8b131628a.webp 600w, /reviews/generated/assets/img/new/Debian-1-800-8b131628a.webp 800w, /reviews/generated/assets/img/new/Debian-1-1000-8b131628a.webp 1000w" type="image/webp"><source srcset="/reviews/generated/assets/img/new/Debian-1-400-be6a7c5d0.png 400w, /reviews/generated/assets/img/new/Debian-1-600-be6a7c5d0.png 600w, /reviews/generated/assets/img/new/Debian-1-800-be6a7c5d0.png 800w, /reviews/generated/assets/img/new/Debian-1-1000-be6a7c5d0.png 1000w" type="image/png"><img src="/reviews/generated/assets/img/new/Debian-1-800-be6a7c5d0.png" alt="Windows Powershell output resolving DNS of ad.x200.lan, but not being able to ping it."></picture></a></p> <p>After some fiddling about, I realised it was trying to use the IPv6 resolver, not IPv4, after sorting that out, I joined the domain successfully.</p> <p><a href="/reviews/assets/img/new/Debian-2.png"><picture><source srcset="/reviews/generated/assets/img/new/Debian-2-400-805b82bd4.webp 400w, /reviews/generated/assets/img/new/Debian-2-600-805b82bd4.webp 600w, /reviews/generated/assets/img/new/Debian-2-800-805b82bd4.webp 800w, /reviews/generated/assets/img/new/Debian-2-1000-805b82bd4.webp 1000w" type="image/webp"><source srcset="/reviews/generated/assets/img/new/Debian-2-400-a52a1dbc4.png 400w, /reviews/generated/assets/img/new/Debian-2-600-a52a1dbc4.png 600w, /reviews/generated/assets/img/new/Debian-2-800-a52a1dbc4.png 800w, /reviews/generated/assets/img/new/Debian-2-1000-a52a1dbc4.png 1000w" type="image/png"><img src="/reviews/generated/assets/img/new/Debian-2-800-a52a1dbc4.png" alt="Windows desktop showing whoami as x200administrator, as to show a successful login through a domain."></picture></a></p> <p><em>&gt;tfw too foolish to set up microsoft products on windows, but smart enough to set them up in linux</em></p> <p>Anyway, off to the containers!</p> <h2 id="challenge-2-samba-in-a-box">challenge 2: samba-in-a-box</h2> <p>Well, the first step is to figure out how to do the networking. I somehow had to set up a Docker and local network so that Docker containers would be on the same LAN and be able to contact the host (for DNS &amp; services). I ended up with a weird combination of macvlan which would allow me to connect to the internet, containers and the host, but not my LAN. Oh well, didn‚Äôt need that one anyway. Although, I later noticed that the container didn‚Äôt have access to the internet, so to fix that I connected it to a second bridged network.</p> <p>Truth be told, this was absolutely hopeless. The fact that AD barely works on Linux alone makes it absolutely impossible to work with in a container. The lack of init, dbus and well‚Ä¶.. everything completely turns into a nightmare really fast. Plus Docker was never particularly meant for these shenanigans anyway, so all I can really do is use virtualisation instead.</p> <h2 id="challenge-25-samba-in-a-bigger-box">challenge 2.5: samba-in-a-bigger-box</h2> <p>I tried KVM at first. Turns out bridging Wi-Fi adapters is nearly impossible. So I‚Äôm cheaping out with VirtualBox.</p> <p><a href="/reviews/assets/img/new/Debian-3.png"><picture><source srcset="/reviews/generated/assets/img/new/Debian-3-400-24a09eeb2.webp 400w, /reviews/generated/assets/img/new/Debian-3-600-24a09eeb2.webp 600w, /reviews/generated/assets/img/new/Debian-3-800-24a09eeb2.webp 800w, /reviews/generated/assets/img/new/Debian-3-1000-24a09eeb2.webp 1000w" type="image/webp"><source srcset="/reviews/generated/assets/img/new/Debian-3-400-eb5a2f5ad.png 400w, /reviews/generated/assets/img/new/Debian-3-600-eb5a2f5ad.png 600w, /reviews/generated/assets/img/new/Debian-3-800-eb5a2f5ad.png 800w, /reviews/generated/assets/img/new/Debian-3-1000-eb5a2f5ad.png 1000w" type="image/png"><img src="/reviews/generated/assets/img/new/Debian-3-800-eb5a2f5ad.png" alt="Debian desktop showing a VirtualBox remote connection with a virtual machine installing Debian."></picture></a></p> <p><em>Hey, I didn‚Äôt use the GUI though! Do I get extra points for that?</em></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vboxmanage createvm --name debian1 --ostype Debian_64 --register --basefolder /home/zxyz/debian1
vboxmanage modifyvm debian1 --ioapic on --memory 1024 --vram 128
vboxmanage createhd --filename /home/zxyz/debian1/debian1.vdi --size 32000 --format VDI
vboxmanage storagectl debian1 --name "SATA Controller" --add sata --controller IntelAhci
vboxmanage storageattach debian1 --storagectl "SATA Controller" --port 0 --device 0 --type hdd --medium  /home/zxyz/debian1/debian1.vdi
vboxmanage storagectl debian1 --name "IDE Controller" --add ide --controller PIIX4
vboxmanage storageattach debian1 --storagectl "IDE Controller" --port 1 --device 0 --type dvddrive --medium /home/zxyz/Downloads/firmware-11.1.0-amd64-netinst.iso
vboxmanage modifyvm debian1 --boot1 dvd --boot2 disk --boot3 none --boot4 none
vboxmanage modifyvm debian1 --vrde on --vrdemulticon on --vrdeport 10002 --nic1 bridged --bridgeadapter1 wls1 --paravirtprodiver kvm
vboxheadless --startvm debian1 &amp;
rdesktop -u a 127.0.0.1:10002
</code></pre></div></div> <p>It‚Äôs quite a lengthy procedure compared to KVM, actually.</p> <p>After messing about with this for literally 4 hours, I genuinely couldn‚Äôt get it to work. I even tried it on Ubuntu, which has support for this stuff ‚Äúnatively‚Äù and this is what I got.</p> <p><a href="/reviews/assets/img/new/Debian-4.png"><picture><source srcset="/reviews/generated/assets/img/new/Debian-4-400-03d2c8d66.webp 400w, /reviews/generated/assets/img/new/Debian-4-600-03d2c8d66.webp 600w, /reviews/generated/assets/img/new/Debian-4-800-03d2c8d66.webp 800w, /reviews/generated/assets/img/new/Debian-4-804-03d2c8d66.webp 804w" type="image/webp"><source srcset="/reviews/generated/assets/img/new/Debian-4-400-fd15bdcf9.png 400w, /reviews/generated/assets/img/new/Debian-4-600-fd15bdcf9.png 600w, /reviews/generated/assets/img/new/Debian-4-800-fd15bdcf9.png 800w, /reviews/generated/assets/img/new/Debian-4-804-fd15bdcf9.png 804w" type="image/png"><img src="/reviews/generated/assets/img/new/Debian-4-800-fd15bdcf9.png" alt="Ubuntu setup saying 'Failed to connect to domain'."></picture></a></p> <p>Thus, I‚Äôll end it here, because this has nothing to do with Debian anymore, it‚Äôs a hellish Microsoft product. Maybe it‚Äôll make a comeback, maybe not. All I can say is that Debian works.</p> <h2 id="conclusion">conclusion</h2> <p><a href="/reviews/assets/img/new/Debian-5.png"><picture><source srcset="/reviews/generated/assets/img/new/Debian-5-400-0e51bbb69.webp 400w, /reviews/generated/assets/img/new/Debian-5-600-0e51bbb69.webp 600w, /reviews/generated/assets/img/new/Debian-5-800-0e51bbb69.webp 800w, /reviews/generated/assets/img/new/Debian-5-1000-0e51bbb69.webp 1000w" type="image/webp"><source srcset="/reviews/generated/assets/img/new/Debian-5-400-efb409b4c.png 400w, /reviews/generated/assets/img/new/Debian-5-600-efb409b4c.png 600w, /reviews/generated/assets/img/new/Debian-5-800-efb409b4c.png 800w, /reviews/generated/assets/img/new/Debian-5-1000-efb409b4c.png 1000w" type="image/png"><img src="/reviews/generated/assets/img/new/Debian-5-800-efb409b4c.png" alt="Debian MATE desktop showing the output of neofetch."></picture></a></p> <p>It‚Äôs the same as I remember. Outdated packages, unnecesaryy package splitting by license, weird philosophy. It works great, tho, still, maybe consider using RHEL if you‚Äôre on x86, otherwise, yeah, Debian‚Äôs good enough.</p> <div class="flex flex-row gap-x-3"> <a href="/reviews/new/Ubuntu.html" class="generic-button" style="text-decoration: none !important" aria-label="Navigate to the previous review"> <div class="flex flex-column gap-x-3 items-center" aria-hidden="true"> <div> <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"> <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path> </svg> </div> <div class="hidden md:inline">Previous</div> </div> </a> <a href="/reviews/old/debian.html" class="generic-button" style="text-decoration: none !important" aria-label="Read the old review"> <span aria-hidden="true">üìñ Old</span> </a> <a href="/reviews/new/Solus.html" class="generic-button" style="text-decoration: none !important" aria-label="Navigate to the next review"> <div class="flex flex-column gap-x-3 items-center" aria-hidden="true"> <div class="hidden md:inline">Next</div> <div> <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" style="transform: scaleX(-1)"> <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path> </svg> </div> </div> </a> </div> </article> </body> </html>